version: '3.8'

services:
  paddle-ocr-app:
    build:
      context: .
      network: host  # Use host network during build
    container_name: paddle-ocr-cpu
    ports:
      - "7860:7860"
    volumes:
      - ./cache:/app/cache
      - ./uploads:/app/uploads
    environment:
      - OPENAI_API_KEY=${OPENAI_API_KEY}
      - PYTHONUNBUFFERED=1
    network_mode: bridge
    extra_hosts:
      - "deb.debian.org:151.101.130.132"
      - "archive.debian.org:208.80.154.15"
    restart: unless-stopped